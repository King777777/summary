~~~js
import React, {Component} from "react";
import {Form, Table} from "vuepress/docs/组件库/antd";
import {YRIndexContentWrap, YRIndexPageLayout, YRQueryFilter} from "yrantd";
import {easyflowEnvServiceMapping} from "@/services/environment";

@Form.create() class ServiceNameMap extends Component {
  constructor(props) {
    super(props);
    this.state = {
      dataSource: [],
      pageLoading: false,
      rowData: {},
      total: 0,
      pageNum: 1,
      pageSize: 10,
      visible: false
    };
    this.formItemList = [
      {
        placeholder: "原服务名",
        key: "originServiceName",
        type: "input",
        position: "show",
        width: 200
      },
      {
        placeholder: "目标服务名",
        key: "targetServiceName",
        type: "input",
        position: "show",
        width: 200
      }
    ];
  }

  componentDidMount() {
    this.handleQueryList();
  }

  generateColumns = () => {
    return [
      {
        title: "原服务名",
        key: "originServiceName",
        width: 200
      },
      {
        title: "映射服务名",
        key: "targetServiceName",
        width: 200
      }
    ];
  };

  handleQueryList = () => {
    const {values} = this;
    const {pageNum, pageSize} = this.state;
    const params = {
      ...values,
      pageNum,
      pageSize
    };
    this.setState({pageLoading: true});
    easyflowEnvServiceMapping(params).then(res => {
      this.setState({pageLoading: false});
      if (res && res.success) {
        this.setState({
          dataSource: res?.data?.list || [],
          total: res?.data?.total || 0
        });
      }
    });
  };

  handleSearch = () => {
    const {form} = this.props;
    form.validateFieldsAndScroll((err, values) => {
      if (err) return;
      this.values = {...values};
      this.setState({pageNum: 1}, () => {
        this.handleQueryList();
      });
    });
  };
  // 处理清空表单
  handleFormReset = () => {
    this.values = {};
    const {form} = this.props;
    form.resetFields();
  };

  render() {
    const {form} = this.props;
    const {pageLoading, dataSource, pageSize, total, pageNum} = this.state;
    return (
      <>
        <YRQueryFilter
          form={form}
          formItemList={this.formItemList}
          handleSearch={this.handleSearch}
          handleFormReset={this.handleFormReset}
        />
        <YRIndexContentWrap>
          <Table
            loading={pageLoading}
            dataSource={dataSource}
            columns={this.generateColumns()}
            // rowKey="loanInvoiceId"
            scroll={{y: document.body.clientHeight - 340, x: 1800}}
            pagination={{
              pageSize,
              total,
              onChange: this.onPageChange,
              onShowSizeChange: this.onPageChange,
              current: pageNum,
              showTotal: () => {
                return `共${total}条`;
              },
              showQuickJumper: true,
              showSizeChanger: true
            }}
          />
        </YRIndexContentWrap>
      </>
    );
  }
}

export default ServiceNameMap;

~~~

