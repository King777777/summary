# 数组拍平

偶然看到数组拍平这种题目，思路就是利用**递归**，

初始化一个result空数组，遍历目标数组，如果不是数组，则直接加入空数组即可，如果是一个数组，则递归调用flat拍平它，然后把拍平结果返回，在上一级用concat拼接数组，或是用`Array.protoType.push.apply()`直接修改result的值，最后返回结果即可。

但是在实现过程中遇到了点问题，最主要的是concat用错了，以为可以直接修改原数组呢，其实不会，而是返回一个新的数组

> concat() 方法用于连接两个或多个数组。
>
> **concat() 方法不会更改现有数组，而是返回一个新数组**，其中包含已连接数组的值。

~~~js
// 使用concat拼接数组返回一个新的数组 
const flat = (arr) => {
    let result = [];
    // 初始化result
  // 遍历arr，不是数组就直接加入result
    for(let i of arr) {
      if(typeof i !== "object"){
        result.push(i);
      } else{
        // 如果是一个数组，则递归调flat(I)它会返回个数组，用concat拼接，返回的新数组再赋值给result
      result = result.concat(flat(i));
      }
  }
  // 最后返回一个一维的
  return result;
}
~~~

下面是改用的使用push的,直接原地修改result的值

~~~js
 const flat = (arr) => {
    let result = [];
    for(let i of arr) {
      if(typeof i !== "object"){
        result.push(i);
      } else{
      Array.prototype.push.apply(result, flat(i));
      }
  }
  return result;
}

~~~



~~~html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
function Example() {
  const flat = (arr) => {
    let result = [];
    for(let i of arr) {
      if(typeof i !== "object"){
        result.push(i);
      } else{
      result = result.concat(flat(i));
      }
  }
  return result;
}


  return (
    <div>
      <p id='pid'>待拍平</p>
      <button onClick={()=>{
        let t = flat([1,2,[3,4],[5,[6,7]],[8,[9,[10,[11,12,13]]]],[14,15]]);
        document.getElementById('pid').innerHTML= t;
      }}>click </button>
    </div>
  )
}
      ReactDOM.render(
        <Example />,
        document.getElementById('root')
      );

    </script>
  </body>
</html>
~~~

![GIF 2022-3-5 1-51-49](https://lwq-img-1312073911.cos.ap-nanjing.myqcloud.com/img/GIF%202022-3-5%201-51-490.gif)
