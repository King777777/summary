# 浏览器标签间通信

有个需求，一个页面点击保存之后，需要另一个页面对此进行响应刷新它的列表，不是父子页面的关系，这就涉及到不同标签页的通信，所以就来学习一手。

## 1.监听localStorage变化

首先send.html负责localStorage变化，一秒钟改变一次save的值，就直接取的时间，方便一点

~~~html
<!DOCTYPE html>
<html>
<head>
    <title>send</title>
</head>
<body>
<script>
    setInterval(()=>{localStorage.setItem("save", Date())}, 1000);
</script>
<div>111</div>
</body>
</html>
~~~

在开receive.html，在其中监听storage变化即可，这里listener函数中最后移除了localStorage中的save,因为监听的是localStorage是否有增删，并不会对其中值的变化做出响应，通过这种方法即可完成某些需求。

比如，有个需要，我们在页面发送一个请求后，需要另一个页面做出响应如刷列表，可以在请求后往localStorage中加入一个值save，然后在另一个页面中监听,如果变化的值是save，那么调用刷新列表函数

~~~html
<!DOCTYPE html>
<html>
<head>
    <title>receive</title>
</head>
<body>
<script>
   window.addEventListener("storage", (e)=>{
       if(e.key === "save"){
           document.getElementById("qw").innerHTML=localStorage.getItem("save");
           localStorage.removeItem("save");
       }
   });
</script>
<div id="qw"></div>
</body>
</html>
~~~

## 2.cookie + setInterval

### 3.websocket

## 4.SharedWorker

感觉都不如第一种，简单易用

[(24条消息) 实现浏览器内多个标签页面之间通信的四种方法_Love——金哥哥的博客-CSDN博客_如何实现浏览器内多个标签页之间的通信?](https://blog.csdn.net/weixin_46399753/article/details/105211771)